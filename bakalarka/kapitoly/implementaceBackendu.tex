\chapter{Implementace backendu}
Backend je část softwaru, která je umístěna na serveru a uživatel
z ní vidí jen výstup, jež dostane. Slouží pro přijímaní požadavku od
klienta a odesílaní případné odpovědi nebo provedení nějaké činnosti bez výstupu. 
\\
Součástí backendu by mělo být API, které slouží jako toto spojení mezi
serverem a klientem. Dále často obsahuje CRON tabulku, která periodicky
vykonává nějaký script.

\section{Server}
Stroj na kterém běží aktuální verze systému běží pod systémem Linux (přesněji Ubuntu).
Na virtual machine poskytnuté matematicko-fyzikální fakultou UK.
\\
Databáze je pak umístěna na serveru u Googlu, kvůli snazší konfiguraci.
Není však problém kdykoliv tuto DB přesunout na stejný stroj, na kterém běží
zbytek backendu a snížit tím prodlevu způsobenou prací s databází.


\section{Knihovny}
Pro rychlý začátek vývoje byla použita knihovna Express.js, která
umožňuje práci s http requesty potřebnými pro fungovaní API a to 
bez většího množství konfigurace ze začátku.
\\
Pro práci s databází byla použita knihovna mongoose, která po rychlé konfiguraci
umožňuje práci s databází typu MongoDB.
\\
Dalšími menšími pomocnými knihovnami, jsou
\textbf{cors} (Cross-Origin Resource Sharing) napomáhající s nastavením hlavičky u API requestu,
\textbf{md5} pro šifrovaní hesel a hašovaní dat a nakonec
\textbf{cookie-parser} zjednodušující práci s cookies.

\subsection{Knihovna express.js}
Jedná se o minimalistickou a zároveň velmi silnou knihovnu poskytující všestranné prostředky pro web.
Obsahuje funkce pro jednoduchou správu HTTP metod a díky tomu je vytváření i větších API jednoduché a přehledné.
Má velmi dobrý výkon, který se sice nedá srovnávat s knihovnami psanými v jazyce C, ale
z JS knihoven je jeden z nejrychlejších.

\subsubsection{Nadstavba pro nahravaní souborů}
Nadstavba \textbf{express-fileupload} umožňuje v těle requestu rozeznat a zpracovat soubor, který
se následně pomocí knihovny \textbf{fs} ukládá na server, specificky do složky uploads.

\subsection{Knihovna mongoose}
Ideální knihovna pro práci s databází typu MongoDB.
Poskytuje funkce pro snadné připojení k databázi a komunikaci s ní.
Hlavní výhodou této knihovny jsou modely, validace a vestavěné přetypování
(javascript je dynamicky typovaný jazyk). 
S modely se pracuje pomocí tkz. \textbf{promise}, která umožňuje řadit
akce za sebe, ve stylu:
\begin{lstlisting}[language=JavaScript]
Model.find(body)
     .limit(_limit || 5)
     .exec()
     .then(result => { res.status(200).json(result) })
     .catch(err => { res.status(500).json("something went wrong") })
\end{lstlisting}

\section{Dokumentace API}

/api/documentation




\subsection{Vlastní mini knihovna pro dokumentaci}

\section{Routes}
\subsection{Uživatel}
\subsection{Autorizace}
\subsection{Záznam}
\subsection{Stránka}
\subsection{Nahrávaní souborů}

\section{Modely}
\subsection{Záznam}
\subsection{Stránka}
\subsection{Uživatel}
